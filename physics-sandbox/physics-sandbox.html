<!-- Import Polymer -->
<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../physics-wrapper/physics-wrapper.html">

<!-- Define your custom element -->
<polymer-element name="physics-sandbox" attribute="nodes">
    <template>
        <content></content>
    </template>
    <script>
        Polymer({
            // Fires when an instance of the element is created
            created: function() {
                this.gravity = -9.8;
                this.dt = 0.1;
            },

            // Fires when the elementâ€™s initial set of children and siblings are guaranteed to exist
            domReady: function() {},

            // Fires when the "<polymer-element>" has been fully prepared
            ready: function() {
                this.timestep();
            },

            // Fires when the element was inserted into the document
            attached: function() {},

            // Fires when the element was removed from the document
            detached: function() {},

            // Fires every fraction of a second and triggers collisioncheck
            timestep: function() {
                this.async(this.timestep, null, this.dt * 500);
                this.applyForces();
                this.advanceState();
                this.collisioncheck();
            },

            applyForces: function() {
                for (var i = 0; i < this.children.length; i++) {
                    this.children[i].accelerate(0, -this.gravity);
                }
            },

            advanceState: function() {
                for (var i = 0; i < this.children.length; i++) {
                    this.children[i].advanceState(this.dt);
                }
            },

            // Checks for collisions (between elements and with edges of sandbox) and triggers colliding children's bump function
            collisioncheck: function() {
                
            }
        });
    </script>

</polymer-element>

