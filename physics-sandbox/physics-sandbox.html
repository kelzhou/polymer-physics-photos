<!-- Import Polymer -->
<link rel="import" href="../../polymer/polymer.html">

<!-- Define your custom element -->
<polymer-element name="physics-sandbox">
    <script>
        Polymer('physics-sandbox', {
            // Fires when an instance of the element is created
            created: function() {},

            // Fires when the elementâ€™s initial set of children and siblings are guaranteed to exist
            domReady: function() {},

            // Fires when the "<polymer-element>" has been fully prepared
            ready: function() {
                this.timestep();
            },

            // Fires when the element was inserted into the document
            attached: function() {},

            // Fires when the element was removed from the document
            detached: function() {},

            // Fires every fraction of a second and triggers collisioncheck
            timestep: function() {
                this.async(this.timestep, null, 100);
                this.collisioncheck;
            },

            // Checks for collisions (between elements and with edges of sandbox) and triggers colliding children's bump function
            collisioncheck: function() {
                [].forEach.call(this.querySelectorAll('physics-element'), function(el, i){
                    //if no intersection at next location
                    el.fire('move');
                    //else if collision
                    el.fire('bump');
                });
            }
        });
    </script>

</polymer-element>

